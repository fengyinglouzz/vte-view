webpackJsonp([22],{201:function(t,e,a){a(516);var i=a(88)(a(361),a(599),null,null);t.exports=i.exports},221:function(t,e,a){"use strict";a.d(e,"b",function(){return r}),a.d(e,"a",function(){return o}),a.d(e,"d",function(){return c}),a.d(e,"c",function(){return d});var i=a(90),s=(a.n(i),a(86)),n=a.n(s),r=function(t,e){t&&("string"!=typeof e&&(e=n()(e)),window.localStorage.setItem(t,e))},o=function(t){if(t)return window.localStorage.getItem(t)},c=function(t,e){t&&("string"!=typeof e&&(e=n()(e)),sessionStorage.setItem(t,e))},d=function(t){if(t)return sessionStorage.getItem(t)}},222:function(t,e,a){"use strict";a.d(e,"a",function(){return c});var i=a(86),s=a.n(i),n=a(221),r=a(87),o=function(t){return null==t||("{}"==s()(t)||'"{}"'==s()(t))},c=function(t){var e=a.i(n.a)("DICT_CACHE");if(o(e)){var i=a.i(r.e)();if(o(i)){var s=JSON.parse('{"doctorAdviceResult":[{"dictInternational":"zh_CN","dictDataValue":"1","dictCode":"doctor_advice_result","dictName":"医嘱处理诊断结果","orgId":1,"dictDataName":"PTE"},{"dictInternational":"zh_CN","dictDataValue":"2","dictCode":"doctor_advice_result","dictName":"医嘱处理诊断结果","orgId":1,"dictDataName":"DVT"}],"patientSynGrade":[],"dvtAdviceIshistory":[{"dictInternational":"zh_CN","dictDataValue":"1","dictCode":"dvt_advice_ishistory","dictName":"DVT诊断流程建议是否历史","orgId":1,"dictDataName":"是"},{"dictInternational":"zh_CN","dictDataValue":"2","dictCode":"dvt_advice_ishistory","dictName":"DVT诊断流程建议是否历史","orgId":1,"dictDataName":"否"}],"assessmentResult":[{"dictInternational":"zh_CN","dictDataValue":"3","dictCode":"assessment_result","dictName":"风险评估结果","orgId":1,"dictDataName":"高危"},{"dictInternational":"zh_CN","dictDataValue":"2","dictCode":"assessment_result","dictName":"风险评估结果","orgId":1,"dictDataName":"中危"},{"dictInternational":"zh_CN","dictDataValue":"1","dictCode":"assessment_result","dictName":"风险评估结果","orgId":1,"dictDataName":"低危"}],"assessmentType":[{"dictInternational":"zh_CN","dictDataValue":"1","dictCode":"assessment_type","dictName":"风险评估类型","orgId":1,"dictDataName":"VTE风险评估"},{"dictInternational":"zh_CN","dictDataValue":"2","dictCode":"assessment_type","dictName":"风险评估类型","orgId":1,"dictDataName":"出血风险评估"},{"dictInternational":"zh_CN","dictDataValue":"3","dictCode":"assessment_type","dictName":"风险评估类型","orgId":1,"dictDataName":"预防禁忌评估"},{"dictInternational":"zh_CN","dictDataValue":"4","dictCode":"assessment_type","dictName":"风险评估类型","orgId":1,"dictDataName":"DVT疑诊"},{"dictInternational":"zh_CN","dictDataValue":"5","dictCode":"assessment_type","dictName":"风险评估类型","orgId":1,"dictDataName":"PTE疑诊"},{"dictInternational":"zh_CN","dictDataValue":"6","dictCode":"assessment_type","dictName":"风险评估类型","orgId":1,"dictDataName":"诊断结果及医嘱"}],"patientCapriniGrade":[{"dictInternational":"zh_CN","dictDataValue":"1","dictCode":"patient_caprini_grade","dictName":"患者数据Caprini风险等级","orgId":1,"dictDataName":"低危"},{"dictInternational":"zh_CN","dictDataValue":"2","dictCode":"patient_caprini_grade","dictName":"患者数据Caprini风险等级","orgId":1,"dictDataName":"中危"},{"dictInternational":"zh_CN","dictDataValue":"3","dictCode":"patient_caprini_grade","dictName":"患者数据Caprini风险等级","orgId":1,"dictDataName":"高危"}],"patientPaduaGrade":[{"dictInternational":"zh_CN","dictDataValue":"1","dictCode":"patient_padua_grade","dictName":"患者数据Padua风险等级","orgId":1,"dictDataName":"低危"},{"dictInternational":"zh_CN","dictDataValue":"3","dictCode":"patient_padua_grade","dictName":"患者数据Padua风险等级","orgId":1,"dictDataName":"高危"}],"doctorAdviceRisk":[{"dictInternational":"zh_CN","dictDataValue":"1","dictCode":"doctor_advice_risk","dictName":"风险预防f措施","orgId":1,"dictDataName":"一般预防"},{"dictInternational":"zh_CN","dictDataValue":"2","dictCode":"doctor_advice_risk","dictName":"风险预防f措施","orgId":1,"dictDataName":"药物预防"},{"dictInternational":"zh_CN","dictDataValue":"3","dictCode":"doctor_advice_risk","dictName":"风险预防f措施","orgId":1,"dictDataName":"机械预防"}],"patientIsRisk":[{"dictInternational":"zh_CN","dictDataValue":"1","dictCode":"patient_is_risk","dictName":"已完成VTE风险评","orgId":1,"dictDataName":"是"},{"dictInternational":"zh_CN","dictDataValue":"2","dictCode":"patient_is_risk","dictName":"已完成VTE风险评","orgId":1,"dictDataName":"否"}],"assessmentItem":[{"dictInternational":"zh_CN","dictDataValue":"8","dictCode":"assessment_item","dictName":"风险评估项目","orgId":1,"dictDataName":"简化Wells评分"},{"dictInternational":"zh_CN","dictDataValue":"9","dictCode":"assessment_item","dictName":"风险评估项目","orgId":1,"dictDataName":"修订版Geneva评分"},{"dictInternational":"zh_CN","dictDataValue":"10","dictCode":"assessment_item","dictName":"风险评估项目","orgId":1,"dictDataName":"医嘱处理"},{"dictInternational":"zh_CN","dictDataValue":"7","dictCode":"assessment_item","dictName":"风险评估项目","orgId":1,"dictDataName":"Wells评分"},{"dictInternational":"zh_CN","dictDataValue":"6","dictCode":"assessment_item","dictName":"风险评估项目","orgId":1,"dictDataName":"机械预防禁忌评估"},{"dictInternational":"zh_CN","dictDataValue":"5","dictCode":"assessment_item","dictName":"风险评估项目","orgId":1,"dictDataName":"药物预防禁忌评估"},{"dictInternational":"zh_CN","dictDataValue":"1","dictCode":"assessment_item","dictName":"风险评估项目","orgId":1,"dictDataName":"Caprini评分"},{"dictInternational":"zh_CN","dictDataValue":"2","dictCode":"assessment_item","dictName":"风险评估项目","orgId":1,"dictDataName":"Padua评分"},{"dictInternational":"zh_CN","dictDataValue":"3","dictCode":"assessment_item","dictName":"风险评估项目","orgId":1,"dictDataName":"外科出血风险评估"},{"dictInternational":"zh_CN","dictDataValue":"4","dictCode":"assessment_item","dictName":"风险评估项目","orgId":1,"dictDataName":"内科出血风险评估"}],"assessmentStage":[{"dictInternational":"zh_CN","dictDataValue":"1","dictCode":"assessment_stage","dictName":"风险评估阶段","orgId":1,"dictDataName":"入院"},{"dictInternational":"zh_CN","dictDataValue":"2","dictCode":"assessment_stage","dictName":"风险评估阶段","orgId":1,"dictDataName":"术后"},{"dictInternational":"zh_CN","dictDataValue":"3","dictCode":"assessment_stage","dictName":"风险评估阶段","orgId":1,"dictDataName":"转科室"},{"dictInternational":"zh_CN","dictDataValue":"4","dictCode":"assessment_stage","dictName":"风险评估阶段","orgId":1,"dictDataName":"动态"}],"rolePower":[{"dictInternational":"zh_CN","dictDataValue":"1","dictCode":"role_power","dictName":"角色数据权限","orgId":1,"dictDataName":"全部"},{"dictInternational":"zh_CN","dictDataValue":"2","dictCode":"role_power","dictName":"角色数据权限","orgId":1,"dictDataName":"本科室"}]}');return a.i(n.b)("DICT_CACHE",s),s}return a.i(n.b)("DICT_CACHE",i),i}return JSON.parse(e)}},224:function(t,e,a){"use strict";var i={};i.M1="/patient",i.M2="/monitor",i.M3="/qualityControl",i.M4_001="/manage",i.M4_002="/systemRole",i.M4_003="/systemOrg",i.M4_004="/systemDict",i.M4_005="/vteModel",i.M4_006="/vteAssessmentDict",i.M4_007="/systemDictData",i.M4_008="/vteDepartment";var s={"1-001-001-001":"caprini","1-001-001-002":"padua","1-001-002-001":"surgery","1-001-002-002":"internalMedicine","1-001-003-001":"drugPrevention","1-001-003-002":"mechanicalPrecaution","1-002-001-001":"wellsDVT","1-002-001-002":"diagnosticProcessDVT","1-002-002-001":"wellsPTE","1-002-002-002":"geneva","1-002-002-003":"diagnosticProcessPTE","1-002-003-001":"doctorAdvice"};e.a={routernextpath:i,systemRootCode:"4",patientRootCode:"1",capriniDictValue:"1",paduaDictValue:"2",surgeryDictValue:"3",internalMedicineDictValue:"4",drugPreventionDictValue:"5",mechanicalPrecautionDictValue:"6",wellsDVTDictValue:"7",wellsPTEDictValue:"8",genevaDictValue:"9",doctorAdviceDictValue:"10",patientQueryIndex:s,capriniModelCode:"1-001-001-001",paduaModelCode:"1-001-001-002",surgeryModelCode:"1-001-002-001",internalMedicineModelCode:"1-001-002-002",drugPreventionModelCode:"1-001-003-001",mechanicalPrecautionModelCode:"1-001-003-002",wellsDVTModelCode:"1-002-001-001",wellsPTEModelCode:"1-002-002-001",genevaModelCode:"1-002-002-002",doctorAdviceModelCode:"1-002-003-001"}},226:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(89);e.default={data:function(){return{baseImgPath:i.b}}}},227:function(t,e,a){e=t.exports=a(189)(!1),e.push([t.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}[class^=el-icon-]{font-size:13px}.el-form-item{margin-bottom:15px}.el-input__inner{height:34px}.noBorderWrap .el-input__inner{border:none}.scoreHead,.scoreHeadRight{border:1px solid #324157;text-align:center;padding:5px 0;font-size:14px;margin-right:-1px}.leftRift{padding:5px 5px 10px 10px}.leftRift .el-checkbox{display:block}.leftRift .el-checkbox+.el-checkbox{margin-left:0}.leftRift .el-checkbox span.el-checkbox__label{word-break:normal;width:auto;display:-ms-inline-grid;display:inline-grid;white-space:pre-line;word-wrap:break-word;overflow:hidden;line-height:14px}.scoreBottom{border-bottom:1px solid #324157;width:100%;margin-bottom:15px}.scoreCenter{width:30%;margin-left:40%;color:#324157}.btnRightRift{margin-right:20px}.el-table th>.cell{line-height:18px;text-align:center;padding:5px}.el-dialog--small{width:auto;min-width:30%}.el-checkbox__input.is-disabled+.el-checkbox__label{color:#324157;opacity:.7}.el-form-item__error{padding-top:2px}.header_container{background-color:#fff;border-bottom:1px solid #d1dbe5;height:60px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding-left:20px;margin:0 20px}.avator{width:36px;height:36px;border-radius:50%;margin-right:37px}.el-dropdown-menu__item{text-align:center}",""])},228:function(t,e,a){var i=a(227);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(190)("3223dcfa",i,!0)},229:function(t,e,a){a(228);var i=a(88)(a(226),a(230),null,null);t.exports=i.exports},230:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header_container"},[a("el-breadcrumb",{attrs:{separator:"/"}},t._l(t.$route.meta.menuTitle,function(e,i){return a("el-breadcrumb-item",{key:i,attrs:{index:e.path}},[t._v(t._s(e))])}),1)],1)},staticRenderFns:[]}},361:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(86),s=a.n(i),n=a(53),r=a.n(n),o=a(52),c=a.n(o),d=a(51),l=a.n(d),m=a(229),p=a.n(m),u=a(89),h=a(221),_=a(224),f=a(222),g=a(87);e.default={inject:["reload"],data:function(){return{baseUrl:u.a,baseImgPath:u.b,patientHospitId:this.$route.query.patientHospitId,capriniForm:{patientHospitId:this.$route.query.patientHospitId,assessmentStage:"",assessmentScore:0,assessmentResult:"",assessmentResultExplain:"低危"},assessmentStageOptions:[],assessmentDictList:{},dictPojoLists:[],notesData:[]}},components:{headTop:p.a},created:function(){this.getAssessmentDictList(),this.getAssessmentDictDict(),this.notesTable()},methods:{getAssessmentDictDict:function(){var t=this;return l()(c.a.mark(function e(){var i,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.assessmentStageOptions=[],e.prev=1,e.next=4,a.i(f.a)();case 4:i=e.sent,s=i.assessmentStage,s.forEach(function(e,a){t.assessmentStageOptions.push({label:e.dictDataName,value:e.dictDataValue,index:a})}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("获取字典数据失败",e.t0);case 12:case"end":return e.stop()}},e,t,[[1,9]])}))()},getAssessmentDictList:function(){var t=this,e=a.i(h.c)("LOGIN_USER"),i=JSON.parse(e),s=i.loginAssessmentDictPojoList;null!=s&&s.length>0&&s.forEach(function(e,a){if(e.assessmentItem==_.a.capriniDictValue){var i=e.loginAssessmentDictPojoList;null!=i&&i.length>0&&i.forEach(function(e,a){t.assessmentDictList[e.assessmentDictScore]||(t.assessmentDictList[e.assessmentDictScore]=[]),t.assessmentDictList[e.assessmentDictScore].push({label:e.assessmentDictName,value:e.assessmentDictCode,score:e.assessmentDictScore,index:a})})}})},saveInfo:function(){var t=this;this.$refs.capriniForm.validate(function(){var e=l()(c.a.mark(function e(i){var n,o,d;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=17;break}return n=r()({},t.capriniForm),e.prev=2,n.modelCode=_.a.capriniModelCode,n.assessmentSelectData=t.dictPojoLists.join(","),o=s()(n),e.next=8,a.i(g._11)({jsonString:o});case 8:d=e.sent,1==d.status?(console.log(d),t.$message({type:"success",message:"保存成功"}),t.claerFrom()):t.$message({type:"error",message:d.message}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:e.next=19;break;case 17:return t.$notify.error({title:"错误",message:"请检查输入是否正确",offset:100}),e.abrupt("return",!1);case 19:case"end":return e.stop()}},e,t,[[2,12]])}));return function(t){return e.apply(this,arguments)}}()),this.reload(),this.$router.go(-1)},cancel:function(){this.reload(),this.$router.go(-1)},automaticCheckout:function(){var t=this;return l()(c.a.mark(function e(){var i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.i(g._12)({modelCode:_.a.capriniModelCode,patientHospitId:t.$route.query.patientHospitId});case 2:i=e.sent,t.capriniForm.assessmentResult=i.assessmentResult,t.capriniForm.assessmentScore=i.assessmentScore,t.capriniForm.assessmentScore>=0&&t.capriniForm.assessmentScore<=2?(t.capriniForm.assessmentResult="1",t.capriniForm.assessmentResultExplain="低危"):t.capriniForm.assessmentScore>=3&&t.capriniForm.assessmentScore<=4?(t.capriniForm.assessmentResult="2",t.capriniForm.assessmentResultExplain="中危"):t.capriniForm.assessmentScore>=5&&(t.capriniForm.assessmentResult="3",t.capriniForm.assessmentResultExplain="高危"),t.dictPojoLists=[],i.assessmentSelectData&&(t.dictPojoLists=i.assessmentSelectData.split(","));case 8:case"end":return e.stop()}},e,t)}))()},notesTable:function(){var t=this;return l()(c.a.mark(function e(){var i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.i(g._13)({modelCode:_.a.capriniModelCode});case 2:i=e.sent,t.notesData=[],i.forEach(function(e){var a={};a.riskScoreName=e.riskScoreName,a.riskScoreRate=e.riskScoreRate,a.riskScoreShowText=e.riskScoreShowText,t.notesData.push(a)});case 5:case"end":return e.stop()}},e,t)}))()},ifendcase:function(t){return this.notesData.riskScoreRate=Number(100*t.riskScoreRate)+"%",this.notesData.riskScoreRate},checkinlist:function(t){var e=this,a=this.dictPojoLists.join(",");if(this.capriniForm.assessmentScore=0,null!=this.assessmentDictList)for(var i in this.assessmentDictList){var s=this.assessmentDictList[i];s.forEach(function(t,s){(","+a+",").indexOf(","+t.value+",")>=0&&(e.capriniForm.assessmentScore=e.capriniForm.assessmentScore+Number(i))})}this.capriniForm.assessmentScore>=0&&this.capriniForm.assessmentScore<=2?(this.capriniForm.assessmentResult="1",this.capriniForm.assessmentResultExplain="低危"):this.capriniForm.assessmentScore>=3&&this.capriniForm.assessmentScore<=4?(this.capriniForm.assessmentResult="2",this.capriniForm.assessmentResultExplain="中危"):this.capriniForm.assessmentScore>=5&&(this.capriniForm.assessmentResult="3",this.capriniForm.assessmentResultExplain="高危")}}}},381:function(t,e,a){e=t.exports=a(189)(!1),e.push([t.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}[class^=el-icon-]{font-size:13px}.el-form-item{margin-bottom:15px}.el-input__inner{height:34px}.noBorderWrap .el-input__inner{border:none}.scoreHead,.scoreHeadRight{border:1px solid #324157;text-align:center;padding:5px 0;font-size:14px;margin-right:-1px}.leftRift{padding:5px 5px 10px 10px}.leftRift .el-checkbox{display:block}.leftRift .el-checkbox+.el-checkbox{margin-left:0}.leftRift .el-checkbox span.el-checkbox__label{word-break:normal;width:auto;display:-ms-inline-grid;display:inline-grid;white-space:pre-line;word-wrap:break-word;overflow:hidden;line-height:14px}.scoreBottom{border-bottom:1px solid #324157;width:100%;margin-bottom:15px}.scoreCenter{width:30%;margin-left:40%;color:#324157}.btnRightRift{margin-right:20px}.el-table th>.cell{line-height:18px;text-align:center;padding:5px}.el-dialog--small{width:auto;min-width:30%}.el-checkbox__input.is-disabled+.el-checkbox__label{color:#324157;opacity:.7}.el-form-item__error{padding-top:2px}.notes{font-size:14px;color:#48576a}.notes .el-table{margin:10px 0}",""])},516:function(t,e,a){var i=a(381);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(190)("a49c7194",i,!0)},599:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("head-top"),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:15,offset:4}},[a("el-form",{ref:"capriniForm",staticClass:"form",attrs:{model:t.capriniForm,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"阶段",prop:"assessmentStage"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:t.capriniForm.assessmentStage,callback:function(e){t.$set(t.capriniForm,"assessmentStage",e)},expression:"capriniForm.assessmentStage"}},t._l(t.assessmentStageOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.automaticCheckout}},[t._v("根据最后一次评分自动勾选建议评分项")])],1),t._v(" "),t._l(t.assessmentDictList,function(e,i){return a("el-col",{key:i,attrs:{span:6}},[a("div",{staticClass:"scoreHead"},[t._v(t._s(i)+"分")]),t._v(" "),a("el-checkbox-group",{staticClass:"leftRift",model:{value:t.dictPojoLists,callback:function(e){t.dictPojoLists=e},expression:"dictPojoLists"}},t._l(e,function(e){return a("el-checkbox",{key:e.value,attrs:{label:e.value,score:e.score},on:{change:function(a){return t.checkinlist(e)}}},[t._v(t._s(e.label))])}),1)],1)}),t._v(" "),a("el-row",{staticClass:"scoreBottom"}),t._v(" "),a("el-form-item",{staticClass:"scoreCenter",attrs:{label:"Caprini评分："}},[a("span",[t._v(t._s(t.capriniForm.assessmentScore)+"分")]),t._v(" "),a("span",[t._v(t._s(t.capriniForm.assessmentResultExplain))])]),t._v(" "),a("div",{staticClass:"notes"},[t._v("注：\n\t\t\t\t\t\t"),a("el-table",{attrs:{data:t.notesData,"max-height":"260",width:"50%",border:""}},[a("el-table-column",{attrs:{prop:"riskScoreName",label:"VTE风险分度","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"riskScoreShowText",label:"Caprini评分","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"riskScoreRate",label:"未采取预防措施VTE发生率",formatter:t.ifendcase,"min-width":"180"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12,offset:8}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.saveInfo}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.cancel}},[t._v("取消")])],1)],1)],2)],1)],1)],1)},staticRenderFns:[]}}});